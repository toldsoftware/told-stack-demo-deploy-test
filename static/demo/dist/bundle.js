webpackJsonp([0],{136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(31),r=n(140);t.App=function(){return o.createElement(o.View,null,o.createElement(o.Text,null,"TEST"),o.createElement(r.StripeTest,null))}},137:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(147);t.clientConfig=new o.ClientConfig({timeBatchSeconds:10,sendLog_domain:"https://told-stack-demo.azureedge.net",sendLog_route:"api/logger/send-log"})},138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(154);t.clientConfig=new o.ClientConfig({lookup_domain:"https://told-stack-demo.azureedge.net",downloadBlob_domain:"https://told-stack-demo.azureedge.net",lookup_route:"api/lookup-lsc",downloadBlob_route:"api/lookup-lsc-download"})},139:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},i=this;Object.defineProperty(t,"__esModule",{value:!0});var s=n(158);t.clientConfig=new s.ClientConfig({stripePublishableKey:"pk_stripe_publishable_key_1234",checkoutOptions:{business:{name:"Told Software",imageUrl:"https://toldstackdemo.blob.core.windows.net/images/ToldLogo128.png",statementDescriptor:"ToldSoft"},requirements:{requireZipCode:!0,requireBillingAddress:!0},experience:{allowRememberMe:!0}}},function(){return o(i,void 0,void 0,function(){return r(this,function(e){return[2,{userToken:"userToken42"}]})})})},140:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var s=n(31),a=n(142),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prepare=function(){return r(t,void 0,void 0,function(){var e,t=this;return i(this,function(n){switch(n.label){case 0:return[4,a.stripeCheckoutProcess.prepare()];case 1:return e=n.sent(),this.setState({isReady:!0,open:e.open}),e.result.subscribe(function(e){console.log("Result Changed",{result:e}),t.setState({result:e})}),[2]}})})},t.open=function(){t.state.open&&t.state.open({product:{productCode:"test-product-01",amountCents:1e4,monthlyAmountCents:1e3,description:"Cool Thing to Buy",statementDescriptor:"prod 01",statementDescriptor_subscription:"prod 01 sub",subscriptionPlanId_noPrice:"prod01",subscriptionPlanName:"prod01"},user:{email:"me@home.com"}})},t}return o(t,e),t.prototype.render=function(){return this.state.hasStarted||(this.setState({hasStarted:!0}),setTimeout(this.prepare)),s.createElement(s.View,null,s.createElement(s.Button,{disabled:!this.state.isReady,onPress:this.open},"Checkout"),this.state.result&&s.createElement(s.View,null,s.createElement(s.Text,null,"checkoutId: ",this.state.result.clientCheckoutId),s.createElement(s.Text,null,"checkoutStatus: ",this.state.result.checkoutStatus),s.createElement(s.Text,null,"paymentStatus: ",this.state.result.paymentStatus),s.createElement(s.Text,null,"subscriptionStatus: ",this.state.result.subscriptionStatus),s.createElement(s.Text,null,"deliverableStatus: ",this.state.result.deliverableStatus),s.createElement(s.Text,null,"deliverableStatus_executionResult: ",this.state.result.deliverableStatus_executionResult)))},t}(s.Component);t.StripeTest=u},141:function(e,t,n){"use strict";function o(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,h.getDeviceInfo()];case 1:return s=e.sent(),h.getDeviceInfo_observable().subscribe(function(e){s=e,console.log("DeviceInfo Changed",{lastDeviceInfo:s}),t.logger.log("DeviceInfo","Changed",s)}),[2]}})})}var r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var s,a=n(146),u=n(145),c=n(75),l=n(143),f=new u.SessionId,h=new l.DeviceInfoAccess;t.logger=new a.Logger(c.clientConfig_logger,function(){return{sessionId:f.sessionId,userId:f.userId}},function(){return{version:"v1.0",path:"a/b/c"}},function(){return{deviceInfo:s}}),t.subscribeLoggerToDeviceInfoChanges=o,o()},142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(156),r=n(75),i=n(141);t.stripeCheckoutProcess=new o.StripeCheckoutProcess(r.clientConfig_stripe,{logCheckoutEvent:function(e,t){i.logger.major("Stripe",e,t)}})},143:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),s=n(76),a=n(20),u=function(){function e(){var e=this;this.getDeviceInfo=function(t){return void 0===t&&(t=!1),o(e,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,this.init(t)];case 1:return e.sent(),[2,this.deviceInfo]}})})},this.init=function(t){return void 0===t&&(t=!1),o(e,void 0,void 0,function(){var e,n,o;return r(this,function(r){switch(r.label){case 0:return!t&&this.deviceInfo?[2]:(this.deviceInfo={},this.deviceInfo.platform=i.Platform.getType(),this.deviceInfo.isHighPixelDensityScreen=i.UserInterface.isHighPixelDensityScreen(),this.deviceInfo.windowSize=i.UserInterface.measureWindow(),this.deviceInfo.pixelRatio=i.UserInterface.getPixelRatio(),e=this.deviceInfo,[4,i.UserInterface.getContentSizeMultiplier()]);case 1:return e.lastContentSizeMultiplier=r.sent(),n=this.deviceInfo,[4,i.UserInterface.getMaxContentSizeMultiplier()];case 2:return n.maxContentSizeMultiplier=r.sent(),this.deviceInfo.isScreenReaderEnabled=i.Accessibility.isScreenReaderEnabled(),o=this.deviceInfo,[4,i.Linking.getInitialUrl()];case 3:return o.initialUrl=r.sent(),this.deviceInfo.timeZoneOffset=(new Date).getTimezoneOffset(),this.deviceInfo.isLocationAvailable=i.Location.isAvailable(),"web"===this.deviceInfo.platform&&(this.deviceInfo.web_userAgent=window.navigator.userAgent,this.deviceInfo.web_platform=window.navigator.platform,this.deviceInfo.web_language=window.navigator.language,this.deviceInfo.web_locationHref=window.location.href),this.deviceInfo.lastActivationState=i.Types.AppActivationState[i.App.getActivationState()],[2]}})})}}return e.prototype.getDeviceInfo_observable=function(){var e=this;return this._observable||(this._observable=new s.Observable(function(t){e._observer=t}),this.subscribe()),this._observable},e.prototype.trigger=function(e){console.log("DeviceInfoAccess.trigger",{change:e}),a.assignPartial(this.deviceInfo,e),this._observer&&this._observer.next(e)},e.prototype.subscribe=function(){var e=this;this._isSubscribed&&(this._isSubscribed=!0,i.App.activationStateChangedEvent.subscribe(function(t){e.trigger({lastActivationState:i.Types.AppActivationState[t]})}),i.Linking.deepLinkRequestEvent.subscribe(function(t){e.trigger({lastDeepLinkRequest:t})}),i.Network.connectivityChangedEvent.subscribe(function(t){e.trigger({lastConnectivity:t})}),i.UserInterface.contentSizeMultiplierChangedEvent.subscribe(function(t){e.trigger({lastContentSizeMultiplier:t})}),i.UserInterface.keyboardNavigationEvent.subscribe(function(t){e.trigger({lastIsNavigatingWithKeyboard:t})}),i.UserPresence.userPresenceChangedEvent.subscribe(function(t){e.trigger({lastUserPresence:t})}))},e}();t.DeviceInfoAccess=u},144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(31),r=n(136);o.App.initialize(!0,!0),o.UserInterface.setMainView(o.createElement(r.App,null))},145:function(e,t,n){"use strict";function o(){return"s_"+(new Date).toISOString()+"_"+i.randHex(16)}function r(){return"u_anon_"+(new Date).toISOString()+"_"+i.randHex(16)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(150),s=function(){function e(e){void 0===e&&(e=null),this.userId=e,this.sessionId=o(),this.userId||(this.userId=r())}return e.prototype.setActualUserId=function(e){if(0!==this.userId.indexOf("anon-"))throw"setActualUserId is only valid if the current userId is anonymous";this.userId=e},e}();t.SessionId=s,t.createSessonId=o,t.createUserId_anonymous=r},146:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n,o){var r=this;this.config=e,this.getUserInfo=t,this.getContextInfo=n,this.getDeviceInfo=o,this._hasSentSessionInfo=!1,this._startTime=Date.now(),this._lastSendTime=Date.now(),this._items=[],this._timeoutId=0,this.sendBatch=function(e){if(void 0===e&&(e=!1),!e&&Date.now()-r._lastSendTime<1e3*r.config.timeBatchSeconds)return void r.scheduleSend();var t=r._items;r._items=[],r.sendNow(t)},this.scheduleSend=function(){var e=Date.now()-r._lastSendTime,t=r.config.timeBatchSeconds-e;clearTimeout(r._timeoutId),r._timeoutId=setTimeout(r.sendBatch,t)},setTimeout(function(){return r.sendSessionInfo()},250)}return e.prototype.sendSessionInfo=function(){this._hasSentSessionInfo||(this._hasSentSessionInfo=!0,this._items.push({isError:null,category:"Session",event:"Info",data:null,time:Date.now(),runTime:Date.now()-this._startTime,startTime:this._startTime,userInfo:this.getUserInfo(),appContextInfo:this.getContextInfo(),deviceInfo:this.getDeviceInfo()}),this.sendBatch(!0))},e.prototype.error=function(e,t,n,o){void 0===o&&(o=!1),this.log(e,t,n,!0,!0)},e.prototype.major=function(e,t,n,o){void 0===o&&(o=!1),this.log(e,t,n,!0)},e.prototype.log=function(e,t,n,o,r){void 0===o&&(o=!1),void 0===r&&(r=!1);var i={isError:!!r||void 0,category:e,event:t,data:n,time:Date.now(),runTime:Date.now()-this._startTime,startTime:this._startTime,userInfo:this.getUserInfo(),appContextInfo:this.getContextInfo(),deviceInfo:void 0};this._items.push(i),this.sendBatch(o)},e.prototype.sendNow=function(e){return o(this,void 0,void 0,function(){var t,n,o,i,s,a,u,c=this;return r(this,function(r){switch(r.label){case 0:if(this._lastSendTime=Date.now(),!e||!e.length)return[2];for(e.forEach(function(e){if(e.data){var t=e.data;"string"!=typeof e.data&&(t=JSON.stringify(e.data)),t.length>c.config.maxDataSize&&(e.data="truncated:"+t.substr(0,c.config.maxDataSize-16)+"...")}}),t=e,n=JSON.stringify(e),o=!0,i=e.length;n.length>this.config.maxSendSize;){if(1===i){t.forEach(function(e){return e.data="truncated:"+JSON.stringify(e.data).substr(0,c.config.maxDataSize)+"..."});break}o=!1,i=Math.floor(i/2),t=e.slice(0,i),n=JSON.stringify(t)}return o||(a=this._items).push.apply(a,e.slice(i)),[4,fetch(this.config.getSendLogUrl(),{method:"POST",body:n})];case 1:return s=r.sent(),s.ok||(t.forEach(function(e){return e._attempts++}),(u=this._items).push.apply(u,t.filter(function(e){return e._attempts<c.config.maxItemSendAttempts}))),o||setTimeout(function(){return c.sendBatch(!0)}),[2]}})})},e}();t.Logger=i},147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),r=function(){function e(e){var t=this;this.maxSendSize=32768,this.maxDataSize=28672,this.sendLog_domain="/",this.sendLog_route="api/logger/send-log",this.getSendLogUrl=function(){return t.sendLog_domain+"/"+t.sendLog_route},o.assignPartial(this,e)}return e}();t.ClientConfig=r},148:function(e,t,n){"use strict";function o(e){return e.substr(0,e.indexOf("@")).replace(/\./g,"_").replace(/[^a-zA-Z0-9]/g,"")+r(e)}function r(e){return e.split("").reduce(function(e,t){return 0|(e=(e<<5)-e+t.charCodeAt(0))},0)}Object.defineProperty(t,"__esModule",{value:!0}),t.hashEmail_partial=o,t.hash=r},149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t=this;this._load=e,this._isLoading=!1,this._resolves=[],this._getInstance=function(){return new Promise(function(e,n){if(t._instance)return e(t._instance);t._resolves.push(e),t._isLoading||(t._isLoading=!0,console.log("InstanceLoader START"),t._load().then(function(e){console.log("InstanceLoader LOADED"),t._instance=e;var n=t._resolves;t._resolves=null,n.forEach(function(t){setTimeout(function(){try{t(e)}catch(e){console.error("InstanceLoader: A resolver threw an uncaught error",{err:e})}})}),console.log("InstanceLoader DONE")}))})}}return e.prototype.load=function(){return this._getInstance()},Object.defineProperty(e.prototype,"instance",{get:function(){return this._getInstance()},enumerable:!0,configurable:!0}),e}();t.InstanceLoader=o},150:function(e,t,n){"use strict";function o(e){return void 0===e&&(e=8),"0000000000000000000000000000000000000000000000000000000000000000".substr(0,e).replace(/0/g,function(){return(0|16*Math.random()).toString(16)})}Object.defineProperty(t,"__esModule",{value:!0}),t.randHex=o},151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t=this;this.options=e,this.hasStartedLoading=!1,this.resolves=[],this.resolveAll=function(){var e=t.resolves;t.resolves=[],e.forEach(function(e){return e(t.instance)})}}return e.prototype.load=function(){var e=this;return new Promise(function(t,n){if(e.instance)return void t(e.instance);if(e.resolves.push(t),!e.hasStartedLoading){e.hasStartedLoading=!0,console.log("ScriptLoader.load START"),e.options.onBeforeLoadScript&&e.options.onBeforeLoadScript();var o=document,r="script",i=e.options.scriptElementId;if(o.getElementById(i))return void e.resolveAll();var s=o.getElementsByTagName(r)[0],a=o.createElement(r);a.id=i,a.onload=function(){e.options.onAfterLoadScript&&e.options.onAfterLoadScript(),e.instance=e.options.getInstance(),e.resolveAll()},a.src=e.options.url,s.parentNode.insertBefore(a,s)}})},e}();t.ScriptLoader=o},152:function(e,t,n){"use strict";function o(e,t,n){void 0===t&&(t=1e3),n=n||{};var o=n.maxTime,r=n.maxAttempts||(o?void 0:5),i=n.base||2,u=s.length;s.push(0);var c=-1,l=function(){if(e(),s[u]!==a&&(c++,!r||c<r)){var n=t*Math.pow(i,c),f=o?Math.min(o,n):n;console.log("setInterval_exponentialBackoff",{actualTime:f,backoffTime:n,timeMs:t,maxTime:o,maxAttempts:r,base:i}),s[u]=setTimeout(function(){l()},f)}};return l(),u}function r(e){clearTimeout(s[e]),s[e]=a}function i(e,t){return new Promise(function(n,o){var r=setTimeout(function(){o("TIMED OUT")},e);t().then(function(e){clearTimeout(r),n(e)}).catch(function(e){clearTimeout(r),o(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var s=[],a=-1;t.setInterval_exponentialBackoff=o,t.clearInterval_exponentialBackoff=r,t.maxTimeout=i},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuid={v4:function(){return(""+1e7+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^16*Math.random()>>e/4).toString(16)})}}},154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),r=function(){function e(e){this.timePollSeconds=1,this.maxPollCount=5,this.timeToLiveSeconds=60,this.lookup_domain="/",this.lookup_route="api/lookup-lsc",this.downloadBlob_domain="/",this.downloadBlob_route="blob",this.shouldGzipDownloadBlob=!1,o.assignPartial(this,e)}return e.prototype.getLookupUrl=function(e){return this.lookup_domain+"/"+this.lookup_route+"/"+e.containerName+"/"+e.blobName},e.prototype.getDataDownloadUrl=function(e,t){return this.downloadBlob_domain+"/"+(this.downloadBlob_route?this.downloadBlob_route+"/":"")+e.containerName+"/"+this.getDataDownloadBlobName(e.blobName,t)},e.prototype.getDataDownloadBlobName=function(e,t){return e+"/"+t.timeKey+(this.shouldGzipDownloadBlob?"_gzip":"")},e}();t.ClientConfig=r},155:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.NotStarted="NotStarted",e.Started="Started",e.Opened="Opened",e.Closed="Closed",e.Submitting="Submitting",e.Submitted="Submitted",e.Submission_Failed="Submission_Failed",e.Submission_Rejected_LoginAndResubmit="Submission_Rejected_LoginAndResubmit"}(t.CheckoutStatus||(t.CheckoutStatus={}));!function(e){e.NotStarted="NotStarted",e.Processing="Processing",e.Paused="Paused",e.PaymentSuceeded="PaymentSuceeded",e.PaymentFailed="PaymentFailed",e.PaymentWithdrawn="PaymentWithdrawn"}(t.PaymentStatus||(t.PaymentStatus={}));!function(e){e.NotStarted="NotStarted",e.Processing="Processing",e.SubscriptionFailed="SubscriptionFailed",e.Subscribed_TrialPeriod="Subscribed_TrialPeriod",e.Subscribed_Normal="Subscribed",e.Subscribed_PastDue="Subscribed_PastDue",e.Unsubscribed_PastDue="Unsubscribed_PastDue",e.Unsubscribed_Cancelled="Unsubscribed_Cancelled"}(t.SubscriptionStatus||(t.SubscriptionStatus={}));!function(e){e.NotStarted="NotStarted",e.Processing="Processing",e.Enabled="Enabled",e.Disabled="Disabled"}(t.DeliverableStatus||(t.DeliverableStatus={}));!function(e){e.NotStarted="NotStarted",e.Processing="Processing",e.Enabled="Enabled",e.Disabled="Disabled",e.Disabled_Impossible="Disabled_Impossible",e.Error="Error"}(t.DeliverableStatus_ExecutionResult||(t.DeliverableStatus_ExecutionResult={}))},156:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var i=n(76),s=n(155),a=n(157),u=n(20),c=n(153),l=n(152),f=function(){function e(e,t){var n=this;this.config=e,this.runtime=t,this.prepare=function(){return o(n,void 0,void 0,function(){var e,t,n,f,h,d,p,b,v,g=this;return r(this,function(m){switch(m.label){case 0:return console.log("StripeCheckoutProcess START"),this._access||(this._access=new a.StripeCheckoutAccess(this.config.stripePublishableKey)),console.log("StripeCheckoutProcess Prepare Stripe Access"),[4,this._access.prepare()];case 1:return m.sent(),console.log("StripeCheckoutProcess Setup Result Observer"),e=c.uuid.v4(),[4,this.config.getUserToken()];case 2:return t=m.sent().userToken,f={serverCheckoutId:null,clientCheckoutId:e,checkoutStatus:s.CheckoutStatus.NotStarted,paymentStatus:s.PaymentStatus.NotStarted,subscriptionStatus:s.SubscriptionStatus.NotStarted,deliverableStatus:s.DeliverableStatus.NotStarted,deliverableStatus_executionResult:s.DeliverableStatus_ExecutionResult.NotStarted,timeChanged:Date.now()},d=function(t){if(console.log("StripeCheckoutProcess updateResult",{result:t}),t.clientCheckoutId&&t.clientCheckoutId!==f.clientCheckoutId)throw"StripeCheckoutProcess: Cannot change clientCheckoutId";if(t.serverCheckoutId&&t.serverCheckoutId!==f.serverCheckoutId)throw"StripeCheckoutProcess: Cannot change serverCheckoutId";u.assignPartial(f,t),f.clientCheckoutId=e,f.timeChanged=Date.now(),n.next(f),g.runtime.logCheckoutEvent("ResultChange",f)},p=new i.Observable(function(e){console.log("StripeCheckoutProcess Observable START"),n=e}),b=function(n,i){return o(g,void 0,void 0,function(){var a,u,c,f,p,b,v=this;return r(this,function(g){switch(g.label){case 0:return d({checkoutStatus:s.CheckoutStatus.Submitting}),a=this.config.getSubmitTokenUrl(),u={userToken:t,clientCheckoutId:e,token:n,args:i,checkoutOptions:h,metadata:this.config.getStripeChargeMetadata(h),statementDescriptor:this.config.getStripeChargeStatementDescriptor(h),statementDescriptor_subscription:this.config.getStripeChargeStatementDescriptor_subscription(h)},[4,fetch(a,{method:"POST",body:JSON.stringify(u)})];case 1:return c=g.sent(),[4,c.json()];case 2:return f=g.sent(),d(f),f.checkoutStatus===s.CheckoutStatus.Submitted&&(p=this.config.getCheckoutStatusUrl(u.token.email,f.serverCheckoutId),b=l.setInterval_exponentialBackoff(function(){return o(v,void 0,void 0,function(){var e,t;return r(this,function(n){switch(n.label){case 0:return[4,fetch(p)];case 1:return e=n.sent(),[4,c.json()];case 2:if(t=n.sent(),d(t),t.checkoutStatus===s.CheckoutStatus.Submission_Rejected_LoginAndResubmit)throw l.clearInterval_exponentialBackoff(b),"Require Login - Not Implemented";return t.deliverableStatus_executionResult>s.DeliverableStatus_ExecutionResult.Processing&&l.clearInterval_exponentialBackoff(b),[2]}})})})),[2]}})})},v=function(t){var n={};u.assignPartial(n,g.config.checkoutOptions),u.assignPartial(n,t),h=n,g._access.open({tokenCallback:b,recommendedOptions:{amount:n.product.amountCents,name:n.business.name,image:n.business.imageUrl,description:n.product.description,zipCode:n.requirements.requireZipCode,billingAddress:n.requirements.requireBillingAddress},additionalOptions:{email:n.user.email,allowRememberMe:n.experience.allowRememberMe,opened:function(){d({checkoutStatus:s.CheckoutStatus.Opened})},closed:function(){f.checkoutStatus<s.CheckoutStatus.Submitting&&d({checkoutStatus:s.CheckoutStatus.Closed})}}}),g.runtime.logCheckoutEvent("Open",{clientCheckoutId:e,openOptions:t,configOptions:g.config.checkoutOptions}),d({checkoutStatus:s.CheckoutStatus.Started})},console.log("StripeCheckoutProcess DONE"),[2,{open:v,result:p}]}})})}}return e.prototype.getResult=function(e){throw new Error("Method not implemented.")},e}();t.StripeCheckoutProcess=f},157:function(e,t,n){"use strict";var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var s=n(151),a=n(149),u=new s.ScriptLoader({url:"https://checkout.stripe.com/checkout.js",scriptElementId:"StripeCheckout",getInstance:function(){return StripeCheckout}}),c=function(){function e(e){var t=this;this.stripePublishableKey=e,this.handlerLoader=new a.InstanceLoader(function(){return r(t,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return console.log("StripeCheckoutProcess.handlerLoader START"),[4,u.load()];case 1:return e=n.sent(),console.log("StripeCheckoutProcess.handlerLoader LOADED"),[4,e.configure({key:this.stripePublishableKey})];case 2:return t=n.sent(),console.log("StripeCheckoutProcess.handlerLoader END"),[2,t]}})})}),this.prepare=function(){return r(t,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return e=this,[4,this.handlerLoader.instance];case 1:return e._handler=t.sent(),[2]}})})},this.open=function(e){var n=t._handler;if(!n)throw"The Stripe Checkout Handler must be loaded before Open is Clicked";n.open(o({token:e.tokenCallback},e.recommendedOptions,e.additionalOptions))}}return e}();t.StripeCheckoutAccess=c},158:function(e,t,n){"use strict";var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),i=n(148),s=function(){function e(e,t){this.options=e,this.getUserToken=t,this.domain="/",this.submit_route="api/stripe-checkout-submit",this.status_route_partial="api/stripe-checkout-status",r.assignPartial(this,e)}return Object.defineProperty(e.prototype,"status_route",{get:function(){return this.status_route_partial+"/{emailHash}/{serverCheckoutId}"},enumerable:!0,configurable:!0}),e.prototype.getSubmitTokenUrl=function(){return""+this.domain+this.submit_route},e.prototype.getCheckoutStatusUrl=function(e,t){return""+this.domain+this.status_route_partial+"/"+this.getEmailHash(e)+"/"+t},e.prototype.getEmailHash=function(e){return i.hashEmail_partial(e)},e.prototype.getStripeChargeMetadata=function(e){return o({},e.user,e.product)},e.prototype.getStripeChargeStatementDescriptor=function(e){return(e.business.statementDescriptor+" "+e.product.statementDescriptor).substr(0,22)},e.prototype.getStripeChargeStatementDescriptor_subscription=function(e){return(e.business.statementDescriptor+" "+e.product.statementDescriptor_subscription).substr(0,22)},e}();t.ClientConfig=s},20:function(e,t,n){"use strict";function o(e,t){return e.reduce(function(e,n){var o=t(n);return(e[o]=e[o]||{items:[]}).items.push(n),e},{})}function r(e,t){var n=o(e,t);return Object.getOwnPropertyNames(n).map(function(e){return n[e].items})}function i(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function s(e,t){for(var n in t){var o=t[n],r=e[n];if(o!==r&&((void 0!==o&&null!==o||void 0!==r&&null!==r)&&("object"!=typeof o||"object"!=typeof r||!s(r,o))))return!1}return!0}function a(e,t){return s(e,t)&&s(t,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.group=o,t.groupToArray=r,t.assignPartial=i,t.partialDeepCompare=s,t.deepCompare=a},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(138);t.clientConfig_lookupLsc=o.clientConfig;var r=n(137);t.clientConfig_logger=r.clientConfig;var i=n(139);t.clientConfig_stripe=i.clientConfig},76:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(348);t.Observable=o.Observable}},[144]);
//# sourceMappingURL=bundle.js.map